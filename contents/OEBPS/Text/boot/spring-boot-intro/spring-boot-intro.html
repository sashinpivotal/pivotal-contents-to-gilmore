                <!DOCTYPE html>
<html lang="en">
<head>

<meta name="course version" content="1.8.1">
<meta name="generator" content="io.pivotal.pal.shipkin:shipkin-plugin:8.5.2, https://github.com/platform-acceleration-lab/shipkin">
<meta name="generated on" content="2020-05-23T13:27:08.453Z">
<meta name="theme-color" content="#34302d">


<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Core Spring - Spring Boot Introduction</title>

<link rel="icon" href="../../theme-images/favicon.png">

<link rel="stylesheet" href="../../css/reset.css">
<link rel="stylesheet" href="../../css/theme.css">
<link rel="stylesheet" href="../../css/highlight.js.min.css">
<link rel="stylesheet" href="../../css/github.css">

<style>
    @import url('https://fonts.googleapis.com/css?family=Varela+Round');

    #header {
        border-color: #6db33f;
        background-color: #34302d;
    }

    .disclaimer {
        background-color: #34302d;
    }

    footer {
        background-color: #34302d;
    }

    .label.label-default {
        background-color: #5fa134;
    }

    a {
        color: #5fa134;
    }

    th {
        background-color: #34302d;
        border-color: #34302d;
    }

    blockquote:before {
        color: #34302d;
    }

    .label.label-default:hover, .label.label-default:focus {
        background-color: #6eb043;
    }

    a:hover, a:focus {
        color: #6eb043;
    }

    .slide {
        color: #34302d;
    }

    .slide h2, .slide label {
        color: #5fa134;
    }

    .slide input {
        color: rgba(52, 48, 45, 0.65);
    }

    .face path {
        fill: #5fa134;
    }

    body {
        background-color: #f1f1f1;
    }

    .slide {
        background-color: rgba(241, 241, 241, 0.9);
    }

    .slide.text {
        background-color: #f1f1f1;
    }

    .slide h2, .slide label {
        color: inherit;
    }

    body {
        color: #34302d;
    }

    td {
        border-color: #34302d;
    }

    html, body {
        font-family: 'Varela Round', sans-serif;
    }

</style>

<link rel="stylesheet" href="../../css/custom.css">
</head>
<body>


<style>
    #spring-logo {
        background: url(../../images/spring-logo.png) -1px -1px no-repeat;
    }
    #spring-logo span {
        background: url(../../images/spring-logo.png) -1px -48px no-repeat;
    }
</style>

<header>
    <div class="container">
        <a id="spring-logo"
           href="../.."><span></span></a>

        <p>
            Customer agrees that the <a rel="noreferrer noopener"
                                        href="https://pivotal.io/svcs-terms">Professional
                Services Terms and Conditions</a>
            and the <a rel="noreferrer noopener"
                       href="https://pivotal.io/training/terms">Education
                And Training Services Terms Of Use</a>
            are incorporated by reference into this Data Sheet and shall
            govern the provision of the Pivotal Services and content
            accessible on from this
            page. Customer may not record or reproduce the training in
            any medium. Customer may not copy, reproduce, or distribute
            or otherwise share the
            training materials in any capacity.
        </p>
    </div>
</header>

<div class="container title">
    <h1>Spring Boot Introduction</h1>
</div>


<a class="feedback" href="https://docs.google.com/forms/d/1EI7PkShHp5FoKHcfYX_eVWJfMtxE-tFTWCPr7H6zodA/viewform" data-url-field="entry.1915922799" target="_blank" rel="noreferrer noopener">
    <button>feedback</button>
</a>

<main id="main">

    <div id="content" class="container">
        <article>
 <h1 id="purpose">Purpose</h1>
<p>In this lab you will gain experience with creating a Spring Boot project
from the beginning, taking advantage of the Spring starters to easily
configure your project.</p>
<h1 id="learning-outcomes">Learning Outcomes</h1>
<p>What you will learn:</p>
<ol>
<li>
<p>How to initialize a project</p>
</li>
<li>
<p>How to select the right starters for your project</p>
</li>
</ol>
<p>Specific subjects you will gain experience with:</p>
<ol>
<li>
<p>Using <code>start.spring.io</code> to create a Boot-enabled project</p>
</li>
<li>
<p>Adding starter dependencies to your Maven or Gradle project</p>
</li>
<li>
<p>Determining what configuration is enabled</p>
</li>
</ol>
<p>There is no project for this lab - you will use the Initializr to
create it.</p>
<p>Estimated time to complete:
30 minutes.</p>
<p>(A solution is provided for reference: <em>30-jdbc-boot-solution</em>).</p>
<h1 id="getting-started">Getting Started</h1>
<p>If you attended the Spring <em>Essentials</em> segment of the <em>Core Spring</em>
course you should already be familiar with the
<a href="../../course-intro/reference-domain/reference-domain.html" rel="noreferrer noopener">Rewards Application</a>.</p>
<p>Otherwise, if this is the first day of your Spring Boot course,
read about the <a href="../../course-intro/reference-domain/reference-domain.html" rel="noreferrer noopener">Rewards Application</a>
now before continuing.
We use this application as the basis for the remaining labs.</p>
<h1 id="use-case">Use Case</h1>
<p>Imagine you wanted to create a very simple application to access and
display information about the accounts in your Reward database.</p>
<p>In a traditional Spring project, you enjoy the developer productivity
provided by the framework to simplify application development.
However, configuring a project with the right dependencies to ensure
you have all the right Spring libraries can be challenging and
time-consuming.</p>
<p>Consider the necessary setup just to configure a JDBC project.</p>
<ul>
<li>You need to obtain the right JDBC drivers for the database you are
using</li>
<li>You need to obtain the core Spring and Spring JDBC libraries</li>
<li>You need to configure your JDBC connections and potentially initialize</li>
<li>You may wish to add JDBC connection pooling for efficiency</li>
<li>You may need to set up database initialization with schema definitions
and data population</li>
</ul>
<p>As you will discover, the most basic Spring Boot application really only
requires the following three files to get started.</p>
<p><img src="images/spring-boot-quickstart.png" alt="Quickstart example" class="figure" /></p>
<p>You will use the <em>Spring Initializr</em> to create a basic JDBC Spring
Boot Project using an HSQLDB (Hyper SQL) database.
You will make a few minor modifications to add SQL scripts to create
tables and populate the database with data for the Reward Network
application.
The initial application will use a very simple JDBC call to query
the <em>T_ACCOUNT</em> table and display the total number of accounts.
Using Spring Boot, you will do this with a minimal
amount of setup and configuration.</p>
<h1 id="instructions">Instructions</h1>
<h2 id="create-and-run-a-spring-boot-project">Create and run a Spring Boot project</h2>
<p>Create a Spring Boot project called <strong>jdbc-boot</strong> that will serve as a
very basic application to expose account details.</p>
<p>Depending on your IDE, a new project wizard may be available that
uses the <em>Spring Initializr</em> for you without leaving the IDE:</p>
<ul>
<li><strong>Spring Tool Suite:</strong> <em>File -&gt; New -&gt; Spring Starter Project</em> (if not there use <em>File -&gt; New -&gt; Other -&gt; Spring Boot -&gt; Spring Starter Project</em>)</li>
<li><strong>IntelliJ IDEA Ultimate Edition:</strong> <em>File -&gt; New -&gt; Project -&gt; Spring Initializr</em></li>
</ul>
<p>Alternatively, use the website directly, download the generated zip and import into your IDE.</p>
<ol>
<li>
<p>Use either your IDE or the
<a href="https://start.spring.io" rel="noreferrer noopener">Spring Initializr Site</a> to create a new
Spring Boot project with the following project values</p>
<table class="table">
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Group</td>
<td>io.pivotal.education.boot</td>
</tr>
<tr>
<td>Artifact</td>
<td>jdbc-boot</td>
</tr>
<tr>
<td>Type</td>
<td>Maven Project or Gradle Project</td>
</tr>
<tr>
<td>Language</td>
<td>Java</td>
</tr>
<tr>
<td>Packaging</td>
<td>JAR</td>
</tr>
<tr>
<td>Java Version</td>
<td>8  or 11 based on your workstation setup</td>
</tr>
<tr>
<td>Version</td>
<td>Default (0.0.1.SNAPSHOT)</td>
</tr>
<tr>
<td>Name</td>
<td>jdbc-boot</td>
</tr>
<tr>
<td>Description</td>
<td>First Boot Project</td>
</tr>
<tr>
<td>Package</td>
<td>rewards</td>
</tr>
</tbody>
</table>
<p>Refer to the <a href="../../appendix/appendix-initializr.html" rel="noreferrer noopener">appendix</a> for
details on how to create a project or module using Spring Boot
Initializr.</p>
<p>Select the following dependencies to add to the project.</p>
<ul>
<li>
<p><strong>JDBC API</strong> (under the SQL category) - Adds general JDBC support,
including the Spring JDBC libraries</p>
</li>
<li>
<p><strong>HyperSQL Database</strong> (also under the SQL category) - Adds specific HSQL
libraries and drivers needed for the HSQL database</p>
</li>
</ul>
<p>If using a wizard in the IDE, be sure to specify the final project
folder name as <strong>jdbc-boot</strong></p>
</li>
<li>
<p>If you did not use the wizard to create the project, you will need
to import the project</p>
</li>
<li>
<p>Take a moment to explore the project that was just created.</p>
<ul>
<li>
<p>Open the <code>pom.xml</code> or <code>build.gradle</code> file and note the
dependencies and the parent
reference.  What 3 dependencies are defined?</p>
</li>
<li>
<p>Now, open the <code>JdbcBootApplication</code> (assuming you've named
your application as <code>jdbc-boot</code> in the previous step).
What are the key elements of this file that might make it behave
as a Spring Boot application?</p>
</li>
</ul>
</li>
<li>
<p>Set the logging level to DEBUG by adding the following line to the
<code>src/main/resources/application.properties</code> file</p>
<pre><code>logging.level.root=DEBUG
</code></pre>
</li>
<li>
<p>Run the <code>JdbcBootApplication</code>.</p>
<p>The application should run successfully.
Now what can you determine from the output?</p>
<p>You should see a message about a <code>dataSource</code> bean
being auto-detected. (You will have to use IDE-provided
search for <strong>Bean with name 'dataSource' has
been autodetected</strong> string in the console because it
will be displayed way before very verbose
<code>CONDITIONS EVALUATION REPORT</code>.)</p>
<p><img src="images/datasource-message.png" alt="DataSource Auto-configuration" class="figure" /></p>
<ul>
<li>
<p>How was your application able to create a JDBC Datasource?</p>
</li>
<li>
<p>Ordinarily, a JDBC DataSource is initialized using a JDBC
driver class, the URL to the database server and more.
Since these were not provided explicitly by you, where did those
values come from?</p>
</li>
</ul>
<p>At this point, your application does not do too much since you are
merely running the default application created from the Spring Boot
Initializr.</p>
</li>
</ol>
<h2 id="use-sql-scripts">Use SQL scripts</h2>
<ol>
<li>
<p>Copy the <code>schema.sql</code> and <code>data.sql</code> files from the <code>26-jdbc-solution</code>
project.
You will find them in <code>src/test/resources/rewards/testdb</code>.
Copy the files to the <code>src/main/resources</code> folder of your new
project.
Make sure the two files reside directly under the <code>resources</code>
folder.</p>
</li>
<li>
<p>Re-run the <code>JdbcBootApplication</code> and notice the console output
now shows a bit more taking place.</p>
<ul>
<li>
<p>Note that a <code>HikariPool</code> JDBC connection pool was created and
configured for the DataSource.</p>
</li>
<li>
<p>Notice also that the two scripts you copied to the <code>resources</code>
folder now automatically get executed, resulting in the database
being initialized with the tables defined in the <code>schema.sql</code>
file and loaded with the data in the <code>data.sql</code> file.
(Search for <code>Executed SQL script</code> string in the console.)</p>
<p>It turns out that there was something special about the location
where you copied the SQL scripts (<code>src/main/resources</code>) because
in a Maven or Gradle project, this directory is <em>always</em> on the classpath.
The SQL files were detected and invoked because Spring Boot
automatically looks for and runs two files <code>schema.sql</code>
and <code>data.sql</code> if it finds them on the classpath.</p>
<p>Alternatively, you could have placed those files anywhere in your
project and named them anything you wanted.
In that case, you would need to add the following entries
to your <code>application.properties</code> file to tell your Spring Boot
application where to find these files.</p>
<pre><code class="language-properties">spring.datasource.schema=&lt;path to your schema SQL file&gt;
spring.datasource.data=&lt;path to your data SQL file&gt;
</code></pre>
</li>
</ul>
</li>
</ol>
<h2 id="use-commandlinerunner-bean">Use CommandLineRunner Bean</h2>
<p>The <code>run</code> method of <code>CommandLineRunner</code> bean gets executed
when a Spring Boot application gets started.
In this step, you are going to use <code>JdbcTemplate</code> bean to
retrieve number of accounts.</p>
<ol>
<li>
<p>Open the <code>JdbcBootApplication</code> class.
Add the following code in place of the default template code.</p>
<pre><code class="language-java">package rewards;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.jdbc.core.JdbcTemplate;

@SpringBootApplication
public class JdbcBootApplication {

    public static void main(String[] args) {
        SpringApplication.run(JdbcBootApplication.class, args);
    }

    @Bean
    CommandLineRunner commandLineRunner(JdbcTemplate jdbcTemplate){

        String QUERY = &quot;SELECT count(*) FROM T_ACCOUNT&quot;;

        // Use Lambda expression to display the result
        return args -&gt; System.out.println(&quot;Hello, there are &quot;
            + jdbcTemplate.queryForObject(QUERY, Long.class)
            + &quot; accounts&quot;);
    }
}
</code></pre>
</li>
<li>
<p>Re-run the <code>JdbcBootApplication</code>.</p>
<p>Note that amidst the typical Spring Boot application output to the
console, there is a line that says: (you might need to
perform text search in the console)</p>
<p><code>Hello, there are 21 accounts</code></p>
</li>
</ol>
<p>Here are some questions to consider</p>
<ul>
<li>
<p>Where did the <code>JdbcTemplate</code> bean come from?</p>
</li>
<li>
<p>You typically initialize or create the <code>JdbcTemplate</code> with an
instance of <code>DataSource</code>.
How did this get created and configured and dependency injected
into the <code>JdbcTemplate</code>?</p>
</li>
</ul>
<h2 id="set-logging-level">Set Logging level</h2>
<ol>
<li>
<p>Set logging level of a package (<code>root</code> in this
example) in the <code>application.properties</code> file</p>
<pre><code class="language-no-format">logging.level.root=ERROR
</code></pre>
</li>
</ol>
<h2 id="customize-banner">Customize banner</h2>
<ol>
<li>
<p>Create custom banner by creating <code>banner.txt</code> under <code>src/main/resources</code> folder.
You can generate a banner text from
<a href="http://patorjk.com/software/taag" rel="noreferrer noopener">here</a> and copy the generated text
into the <code>banner.txt</code> file.</p>
</li>
<li>
<p>Re-run the application.
You should now see the following output if everything is configured
properly.</p>
<pre><code class="language-no-format">  _________            .__                 __________               __
 /   _____/____________|__| ____    ____   \______   \ ____   _____/  |_
 \_____  \\____ \_  __ \  |/    \  / ___\   |    |  _//  _ \ /  _ \   __\
 /        \  |_&gt; &gt;  | \/  |   |  \/ /_/  &gt;  |    |   (  &lt;_&gt; |  &lt;_&gt; )  |
/_______  /   __/|__|  |__|___|  /\___  /   |______  /\____/ \____/|__|
        \/|__|                 \//_____/           \/

Hello, there are 21 accounts

Process finished with exit code 0
</code></pre>
</li>
</ol>
<h2 id="write-integration-testing-code">Write integration testing code</h2>
<ol>
<li>
<p>Write testing code using <code>@SpringBootTest</code> annotation.</p>
<pre><code class="language-java">package rewards;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.jdbc.core.JdbcTemplate;

import static org.assertj.core.api.Assertions.*;

@SpringBootTest
public class JdbcBootApplicationTests {
    public static final String QUERY = &quot;SELECT count(*) FROM T_ACCOUNT&quot;;

    @Autowired
    private JdbcTemplate jdbcTemplate;

    @Test
    public void testNumberOfAccount() throws Exception {

        long count = jdbcTemplate.queryForObject(QUERY, Long.class);

        assertThat(count).isEqualTo(21L);
    }

}
</code></pre>
</li>
<li>
<p>Run the test and verify it succeeds.</p>
</li>
</ol>
<h1 id="summary">Summary</h1>
<p>In this lab, you have possibly gotten your first taste of the workings
of Spring Boot.</p>
<ul>
<li>
<p>You have seen the basic steps to quickly bootstrapping a Spring
Boot project with a technology such as JDBC, using one of the
various methods of accessing the Spring Initializer.</p>
</li>
<li>
<p>You have seen how, simply by having certain dependencies and their
associated classes on the classpath, certain beans will be created.</p>
</li>
<li>
<p>You have seen how simple it is to create a basic JDBC application
with a minimal amount of configuration and writing code.</p>
</li>
<li>
<p>You have seen how basic configuration of your Spring Boot application
can be performed through the <code>application.properties</code> file.</p>
</li>
</ul>
<p>Many of the features you have seen here will be explored further in later
modules of the course.</p>
<p>Congratulations, you are done with the lab!</p>
         </article>
        <div class="sidebar-container">
<nav id="sidebar">
    <div class="title">
        <a href="../../index.html">Return to Core Spring</a>
    </div>
    <div class="content">
        <a href="#">Back to top</a>

<ul>
        <li>
        <a href="#purpose">Purpose</a>

        </li>
        <li>
        <a href="#learning-outcomes">Learning Outcomes</a>

        </li>
        <li>
        <a href="#getting-started">Getting Started</a>

        </li>
        <li>
        <a href="#use-case">Use Case</a>

        </li>
        <li>
        <a href="#instructions">Instructions</a>

<ul>
        <li>
        <a href="#create-and-run-a-spring-boot-project">Create and run a Spring Boot project</a>

        </li>
        <li>
        <a href="#use-sql-scripts">Use SQL scripts</a>

        </li>
        <li>
        <a href="#use-commandlinerunner-bean">Use CommandLineRunner Bean</a>

        </li>
        <li>
        <a href="#set-logging-level">Set Logging level</a>

        </li>
        <li>
        <a href="#customize-banner">Customize banner</a>

        </li>
        <li>
        <a href="#write-integration-testing-code">Write integration testing code</a>

        </li>
</ul>
        </li>
        <li>
        <a href="#summary">Summary</a>

        </li>
</ul>
    </div>
</nav>
        </div>
    </div>
</main>


<div class="slide" data-slide="1">
    <h1>Spring Boot Introduction</h1>
        <ul>
        </ul>
</div>

<div class="slide transparent" data-slide="2">
    <h1>Get started!</h1>
    <h2>Spring Boot Introduction</h2>
</div>

<div class="slide" data-slide="3">
    <h1>Wrap up</h1>
        <ul>
        </ul>

    <div class="faces">
        <svg class="face" viewBox="0 0 24 24">
            <path d="M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M13,9.94L14.06,11L15.12,9.94L16.18,11L17.24,9.94L15.12,7.82L13,9.94M8.88,9.94L9.94,11L11,9.94L8.88,7.82L6.76,9.94L7.82,11L8.88,9.94M12,17.5C14.33,17.5 16.31,16.04 17.11,14H6.89C7.69,16.04 9.67,17.5 12,17.5Z"/>
        </svg>

        <svg class="face" viewBox="0 0 24 24">
            <path d="M8.5,11A1.5,1.5 0 0,1 7,9.5A1.5,1.5 0 0,1 8.5,8A1.5,1.5 0 0,1 10,9.5A1.5,1.5 0 0,1 8.5,11M15.5,11A1.5,1.5 0 0,1 14,9.5A1.5,1.5 0 0,1 15.5,8A1.5,1.5 0 0,1 17,9.5A1.5,1.5 0 0,1 15.5,11M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M9,14H15A1,1 0 0,1 16,15A1,1 0 0,1 15,16H9A1,1 0 0,1 8,15A1,1 0 0,1 9,14Z"/>
        </svg>

        <svg class="face" viewBox="0 0 24 24">
            <path d="M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M16.18,7.76L15.12,8.82L14.06,7.76L13,8.82L14.06,9.88L13,10.94L14.06,12L15.12,10.94L16.18,12L17.24,10.94L16.18,9.88L17.24,8.82L16.18,7.76M7.82,12L8.88,10.94L9.94,12L11,10.94L9.94,9.88L11,8.82L9.94,7.76L8.88,8.82L7.82,7.76L6.76,8.82L7.82,9.88L6.76,10.94L7.82,12M12,14C9.67,14 7.69,15.46 6.89,17.5H17.11C16.31,15.46 14.33,14 12,14Z"/>
        </svg>
    </div>
</div>


<div class="slide lemon-squeezy" data-slide="7">
    <h1>Easy peasy</h1>
    <h1>lemon squeezy!</h1>
</div>

<div class="slide" data-slide="8">
    <h1>Lunch time!</h1>
    <label for="lunch-end">will return</label>
    <input type="text" name="lunch-end" data-time="90">
</div>

<div class="slide" data-slide="9">
    <h1>Break time!</h1>
    <label for="break-end">will return</label>
    <input type="text" name="break-end" data-time="15">
</div>

<audio src="../../audio/gong.mp3"
       id="gong"
       preload>
</audio>

<div class="slide" data-slide="?">
    <h2>Keyboard shortcuts</h2>
    <table>
        <thead>
        <tr>
            <th>Key</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>1</td>
            <td>Show <em>introduction</em> slide</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Show <em>get started</em> slide</td>
        </tr>
        <tr>
            <td>3</td>
            <td>Show <em>wrap up</em> slide</td>
        </tr>
        <tr>
            <td>4</td>
            <td>Show <em>instructor notes</em></td>
        </tr>
        <tr>
            <td>7</td>
            <td>Easy peasy</td>
        </tr>
        <tr>
            <td>8</td>
            <td>Show <em>lunch time</em> slide</td>
        </tr>
        <tr>
            <td>9</td>
            <td>Show <em>break time</em> slide</td>
        </tr>
        <tr>
            <td>0</td>
            <td>Play gong sound</td>
        </tr>
        <tr>
            <td>x</td>
            <td>Close slide</td>
        </tr>
        <tr>
            <td>?</td>
            <td>Show this help message</td>
        </tr>
        </tbody>
    </table>
</div>

<footer>
    <div>
        © Copyright 2020 Pivotal Software, Inc. All Rights Reserved. •
        <a href="https://pivotal.io/privacy-policy" rel="noreferrer noopener">Privacy Policy</a> •
        <a href="https://pivotal.io/legal" rel="noreferrer noopener">Terms of Use</a>
    </div>
    <div>
        <label class="hidden-checkbox">
            <input type="checkbox" id="instructor-mode">
            <span>course version: 1.8.1<sup class="check">IM</sup></span>
        </label>
    </div>
</footer>

<script src="../../js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="../../js/assignmentSubmission.js"></script>
<script src="../../js/shipkin.js"></script>
<script src="../../js/slides.js"></script>

</body>
</html>

